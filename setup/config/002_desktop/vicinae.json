{
  "version": 1,
  "description": "Vicinae (runner)",
  "commands": [
    { "kind": "package", "backend": "yay", "name": "vicinae-bin" },
    { "kind": "symlink", "source": "config/vicinae", "target": "~/.config/vicinae" },

    { "kind": "shell", "script": [
        "if [ -e \"$HOME/.local/share/vicinae/extensions/pulseaudio\" ]; then",
        "  echo 'pulseaudio extension already present; skipping build.'",
        "  exit 0",
        "fi",
        "git clone https://github.com/rastsislaux/vicinae-pulseaudio-extension",
        "cd vicinae-pulseaudio-extension",
        "npm install && npm run build",
        "cd ..",
        "rm -rf vicinae-pulseaudio-extension"
    ] },

    { "kind": "shell", "script": [
        "if [ -e \"$HOME/.local/share/vicinae/extensions/wifi-commander\" ] && [ -e \"$HOME/.local/share/vicinae/extensions/bluetooth\" ]; then",
        "  echo 'wifi-commander and bluetooth extensions already present; skipping build.'",
        "  exit 0",
        "fi",
        "git clone --depth 1 https://github.com/vicinaehq/extensions",
        "if [ ! -e \"$HOME/.local/share/vicinae/extensions/wifi-commander\" ]; then",
        "  cd extensions/extensions/wifi-commander",
        "  npm install && npm run build",
        "  cd ../../..",
        "fi",
        "if [ ! -e \"$HOME/.local/share/vicinae/extensions/bluetooth\" ]; then",
        "  cd extensions/extensions/bluetooth",
        "  npm install && npm run build",
        "  cd ../../..",
        "fi",
        "rm -rf extensions"
    ] }
  ]
}
